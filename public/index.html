<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Waitlist Bot</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">

  <h1>ðŸ¤– Waitlist Bot</h1>
  <p class="subtitle">Fast â€¢ Simple â€¢ Reliable Waitlists for Discord</p>

  <!-- STATUS -->
  <div id="statusBox" class="checking">ðŸŸ¡ Checking Status...</div>
  <p id="uptime"></p>
  <p id="servers"></p>
  <p id="waitlists"></p>

  <!-- BUTTONS -->
  <div class="buttons">
    <a href="https://discord.com/oauth2/authorize?client_id=1446687675330330826&permissions=139586825281&integration_type=0&scope=applications.commands+bot"
       class="btn invite">âž• Invite Bot</a>

    <button id="themeBtn" class="btn theme">ðŸŒ— Theme</button>
  </div>

  <!-- COMMAND SECTION -->
  <div class="section">
    <h2>ðŸ“œ Commands</h2>

    <div class="cmd"><b>/setup</b> â€” Configure roles + channels.</div>
    <div class="cmd"><b>/createwaitlist</b> â€” Create a new waitlist.</div>
    <div class="cmd"><b>/deletewaitlist</b> â€” Delete a waitlist.</div>
    <div class="cmd"><b>/renamewaitlist</b> â€” Rename a waitlist.</div>
    <div class="cmd"><b>/listwaitlists</b> â€” Show all waitlists.</div>
    <div class="cmd"><b>/setwaitlist</b> â€” Post a waitlist in a channel.</div>
    <div class="cmd"><b>/add</b> â€” Add a user.</div>
    <div class="cmd"><b>/remove</b> â€” Remove a user.</div>
    <div class="cmd"><b>/purgeallwaitlists</b> â€” Delete ALL waitlists.</div>
    <div class="cmd"><b>/cmds</b> â€” Show all commands.</div>
    <div class="cmd"><b>/ping</b> â€” Bot version + latency.</div>
  </div>

</div>

<script>
async function getStatus() {
  try {
    const res = await fetch("/status");
    const data = await res.json();

    const box = document.getElementById("statusBox");

    // Status colors
    if (data.online) {
      box.className = "online";
      box.innerText = "ðŸŸ¢ Online";
    } else {
      box.className = "offline";
      box.innerText = "ðŸ”´ Offline";
    }

    // Uptime
    let sec = Math.floor(data.uptime / 1000);
    let h = Math.floor(sec / 3600);
    sec %= 3600;
    let m = Math.floor(sec / 60);
    sec %= 60;

    document.getElementById("uptime").innerText =
      `Uptime: ${h}h ${m}m ${sec}s`;

    // Server count
    document.getElementById("servers").innerText =
      `Servers: ${data.guilds}`;

    // Waitlist count
    document.getElementById("waitlists").innerText =
      `Total Waitlists: ${data.waitlists}`;
  } catch (err) {
    console.log("Status fetch error");
  }
}

// Update every 2 sec
setInterval(getStatus, 2000);
getStatus();

// Theme switch
document.getElementById("themeBtn").onclick = () => {
  document.body.classList.toggle("light");
};
</script>

</body>
</html>
